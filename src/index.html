<!--フォーム本体(index.html)-->

<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
    <base target="_top">
    <?!= include('style'); ?>
  </head>
  <main>
    <body>
      <?!= TitleLogoTag ?><!--HTMLとして埋め込み-->
      <h1 id="title"><?= Title ?></h1>
      <p class="alert" id="noItemExist">アイテムが追加されていません</p>
      <p class="alert" id="emptyAlert">赤枠の領域が未入力です</p>
      <p class="alert" id="finalCheck">入力内容を確認してください</p>
      <div id="formWrapper">
        <form id="form">
          <div id="header">
            <div class="inputItem"><label>申請者</label><input type="text" id="name" placeholder="氏名を入力"></div>
            <div class="inputItem">
              <label>購入場所</label>
              <div id="retailerSwitch" class="switchWrapper" onclick="classSwitcher(this)"><div class="toggleSwitch left"></div><span class="left selected">一括</span><span class="right">個別</span></div>
              <input type="text" id="retailer" placeholder="購入場所を入力">
            </div>
            <div class="inputItem">
              <label>申請先</label>
              <div id="applyToSwitch" class="switchWrapper" onclick="classSwitcher(this)"><div class="toggleSwitch left"></div><span class="left selected">一括</span><span class="right">個別</span></div>
              <select id="applyTo" class="option"></select>
            </div>
            <div class="inputItem">
              <label>購入目的</label>
              <div id="purposeSwitch" class="switchWrapper" onclick="classSwitcher(this)"><div class="toggleSwitch left"></div><span class="left selected">一括</span><span class="right">個別</span></div>
              <input type="text" id="purpose" placeholder="購入目的を入力">
            </div>
            <div class="inputItem">
              <label>税率計算</label> 
              <div id="taxRateSwitch" class="switchWrapper" onclick="classSwitcher(this);"><div class="toggleSwitch left"></div><span class="left selected">税込</span><span class="right">税別</span></div>
              <p class="description">税率計算の有効化</p>
            </div>
            <div class="inputItem">
              <label>補正</label> 
              <div id="adjustSwitch" class="switchWrapper" onclick="classSwitcher(this);"><div class="toggleSwitch left"></div><span class="left selected">なし</span><span class="right">あり</span></div>
              <p class="description">税率計算時の金額補正</p>
            </div>
            <div class="inputItem">
              <label>割引</label> 
              <div id="reductionSwitch" class="switchWrapper" onclick="classSwitcher(this);"><div class="toggleSwitch left"></div><span class="left selected">なし</span><span class="right">あり</span></div>
              <p class="description">割引の適用</p>
            </div>
          </div>
          <hr class="thickLine">
          <div id="itemWrapper">
            <div id="itemOriginal" class="item">
              <p class="itemId">ID: <span name="itemId">000</span></p>
              <svg class="systemButton delete" viewBox="-50 -50 100 100">
                <circle cx="0" cy="0" r="45" fill="white" stroke-width="5px" />
                <path d="M 0 -30 L 0 30 M -30 0 L 30 0" stroke-width="10px" stroke-linecap="round" transform="rotate(45)" />
              </svg>
              <div class="itemHeader">
                <div class="inputItem product"><span class="miniLabel">品名</span><input type="text" name="product" placeholder="品名を入力"></div>
                <div class="inputItem retailer invisible"><span class="miniLabel">購入場所</span><input type="text" name="retailer" placeholder="購入場所を入力"></div>
                <div class="inputItem applyTo invisible"><span class="miniLabel">申請先</span><select name="applyTo" class="option"></select></div>
                <div class="inputItem category"><span class="miniLabel">項目</span><select name="category" class="option"></select></div>
                <div class="inputItem purpose invisible"><span class="miniLabel">目的</span><input type="text" name="purpose" placeholder="購入目的を入力"></div>
              </div>
              <div class="inputWrapper">
                <div class="inputItem unitPrice"><span class="miniLabel">単価</span><input type="number" name="unitPrice" placeholder="単価"></div>
                <div class="inputItem quantity"><span class="miniLabel">個数</span><select name="quantity" class="option"></select></div>
                <div class="inputItem taxRate invisible"><span class="miniLabel">税率</span><select name="taxRate" class="option"></select></div>
                <div class="inputItem taxRate invisible"><span class="miniLabel">税</span><p class="price" name="tax">0</p></div>
                <div class="inputItem adjust invisible"><span class="miniLabel">補正</span><select name="adjust" class="option"></select></div>
                <div class="inputItem reduction invisible"><span class="miniLabel">割引</span><input type="number" name="reduction" placeholder="割引額"></label></div>
                <div class="inputItem itemPrice"><span class="miniLabel">小計</span><p class="price" name="itemPrice">0</p></div>
              </div>
            </div>
          </div>
          <p class="alert" id="itemLimitAlert">これ以上増やせません！</p>
          <svg class="systemButton add" viewBox="-50 -50 100 100" onclick="addItem()">
            <circle cx="0" cy="0" r="45" fill="transparent" stroke-width="5px" />
            <path d="M 0 -30 L 0 30 M -30 0 L 30 0" stroke-width="10px" stroke-linecap="round" />
          </svg>
          <hr class="thickLine">
          <div class="inputItem otherCosts"><label>送料・電車賃・代引き手数料</label><input type="number" id="otherCosts" placeholder="その他経費"></div>
        </form>
      </div>
      <div id="links">
        <a href="<?= SpreadSheetUrl ?>" target="_blank" rel="noopener noreferrer">スプシはこちら</a>
        <a href="https://github.com/00kenno/Expense_Report_Form" target="_blank" rel="noopener noreferrer">引継ぎと管理</a>
      </div>
      <div id="bottomFixed">
        <div id="bottomContent">
          <p class="totalPrice">合計申請額 &yen;<span class="price" id="totalPrice">0<span></p>
          <div class="handleButtonWrapper">
            <div class="handleButton" id="confirm"><p class="buttonLabel">確認</p></div>
            <div class="handleButton" id="modify"><p class="buttonLabel">修正</p></div>
            <div class="handleButton" id="submit"><p class="buttonLabel">送信</p></div>
          </div>
        </div>
      </div>
      <div id="fullOverlay">
        <div id="overlayContent">
          <div id="sendingAnimation"></div>
          <div class="handleButton" id="kill"><p class="buttonLabel">停止</p></div>
          <div id="successMessages">
            <div class="flexbox">
              <p class="message">成功&#x2705;</p>
              <div class="handleButtonWrapper">
                <div class="handleButton" id="clearpage"><p class="buttonLabel">別の内容を送信</p></div>
                <div class="handleButton" onclick="openSpreadSheet();"><p class="buttonLabel">スプシを確認</p></div>
              </div>
            </div>
          </div>
          <div id="failureMessages">
            <div class="flexbox">
              <p class="message">失敗&#x1f61e;</p>
              <div class="handleButtonWrapper">
                <div class="handleButton" id="back"><p class="buttonLabel">戻る</p></div>
                <div class="handleButton" id="retry"><p class="buttonLabel">再送信</p></div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <?!= include('script'); ?>
    </body>    
  </main>
</html>
